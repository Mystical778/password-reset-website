<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            text-align: center;
        }
        h1 {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Redirecting...</h1>
        <p>Please wait while we redirect you.</p>
    </div>

    <script>
        // Get all query parameters from URL
        const fullUrl = window.location.href;
        const params = new URLSearchParams(window.location.search);
        
        // Detect if user is on mobile
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        console.log('Is Mobile:', isMobile);
        console.log('Full URL:', fullUrl);
        
        // Redirect based on device type
        if (isMobile) {
            // Mobile: redirect to app with full URL
            window.location.href = fullUrl.replace('https://Mystical778.github.io/password-reset-website/redirect.html', 'com.chan.auth://password-reset');
            
            // Fallback to website if app not installed (after 3 seconds)
            setTimeout(() => {
                window.location.href = 'https://Mystical778.github.io/password-reset-website';
            }, 3000);
        } else {
            // Desktop/Web: redirect to website with full Supabase verification URL
            window.location.href = fullUrl.replace('/redirect.html', '');
        }
    </script>
</body>
</html>
